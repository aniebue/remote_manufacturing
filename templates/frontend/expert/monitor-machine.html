{% include "templates/frontend/includes/header.html" %}
<script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.bundle.min.js'></script>
{% load static %}



<main id="main" class="main-box ">

    

    <!-- ======= Contact Section ======= -->
    <section class="page-content ">
      <div class="container-fluid">

        <div class="row d-flex justify-content-center ">

         
          <div class="machine-bg2 ">

            <div class="row mt-10 mb-3 pt-40 page-white">
              <div class="col-12 pb-20">
                <div class="font-weight-bold text-center ">Monitor Machine</div>
              </div>

              <div class="col-12 pb-10 pt-10 bg-primary">
                <div class="row">
                  <div class="col-4 monitor-machine">
                    <div class="font-weight-bold text-left text-white"> <a href="/expert/dashboard"> <i class="fa fa-angle-left"></i> Back</a> </div>
                  </div>
                  <div class="col-4 text-center text-white font-weight-bold">
                    {{ machine.machine_name }}
                  </div>
                  <div class="col-4 monitor-machine">
                    <div class="font-weight-bold text-right text-white"><a href="/expert/machine-status/{{ machine.id }}">View Machine Status <i class="fa fa-angle-right"></i></a></div>
                  </div>
                </div>
              </div>
        
              <div class="col-12 mt-20 text-center">
                <div class="row">
                  <div class="col-md-6 col-12 pr-1 pb-20">
                    <div class="font-weight-bold text-orange h3">Monitor 1</div>
                    <img src="{% static 'frontend/images/Main-CAM1.gif' %}" class="img-fluid">
                  </div>
                  <div class="col-md-6 col-12 pl-1">
                    <div class="font-weight-bold text-orange h3">Monitor 2</div>
                    <img src="{% static 'frontend/images/Main-CAM2.gif' %}" class="img-fluid">
                  </div>
                </div>
              </div>

              <div class="col-12 mt-20">
                <div class="row">
                  <div class="col-10 offset-1">
                   <span class="font-weight-bold">Call Worker:</span>  <a class="text-orange h4" href="#" onclick="startVoiceCall2(this)"><i class="fa fa-phone"></i> {{ machine.machine_worker.first_name }} {{ machine.machine_worker.last_name }}</a>
                  </div>
                </div>
                <audio id="local-video" autoplay></audio>&nbsp;<audio id="remote-video" autoplay></audio>
              </div>


            
            </div>

    

          </div>

        </div>

      </div>
    </section><!-- End Contact Section -->

  </main><!-- End #main -->

  <script>
    const toUser = {{machine.machine_worker.id}};
    const startVoiceCall2 = (btn) => {
      sendWsData(toUser, -2, {info_type: 'voice_call_2'});
      startMediaAccess();
      const btnParent = btn.parentNode;
      btn.remove();
      const htmlCont = `
        <span style="font-size: 25px;margin: 0 5px;"><i class="fa fa-microphone" aria-hidden="true"></i></span>
        <span> <a title="End Call" class="btn btn-danger" onclick="endCall2(${toUser});" href="javascript:void(0);">End Call</a> </span>
      `;
      btnParent.insertAdjacentHTML("beforeend", htmlCont);
      // startCall();
    }
  </script>


{% include "templates/frontend/expert/includes/nav.html" %}
{% include "templates/frontend/includes/footer-dashboard.html" %}